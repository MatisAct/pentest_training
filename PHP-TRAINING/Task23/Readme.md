#[Task 23] PHP cơ bản
###các công việc cần làm
- [**Kết nối database**](#1)
- [**Trang đăng nhập/đăng kí có kết nối database**](#2)
- [**Chức năng tìm kiếm**](#3)
- [**Chức năng download/upload file**](#3)
- [**Chức năng cho người khác comment vào bài blog**](#4)

<a name="1"></a>
####1:Kết nối database(hostinger)

<img src="http://image.prntscr.com/image/6253f6e353194796a4d91bce219282ff.png">

**php kết nối tên SQL.php**
```
<?php
$db_host = "localhost"; // Giữ mặc định là localhost
$db_name    = 'ten tao o tren';
$db_username    = 'ten tao o tren';
$db_password    = '*********';
@mysql_connect("{$db_host}", "{$db_username}", "{$db_password}") or die("Không thể kết nối database");
@mysql_select_db("{$db_name}") or die("Không thể chọn database");
?>
?>
```
<a name="2"></a>
####2:Trang đăng nhập/đăng kí có kết nối database

- trước hết phải tạo table để lưu thông tin

<img src="http://image.prntscr.com/image/455120293cb941fb9a7e71c51c8b4893.png">

<img src="http://image.prntscr.com/image/6b4115eddeed4604b2546084fb8f6c8f.png">


tiếp theo vào insert tabble để thêm thông tin:nhấn go để thêm

<img src="http://image.prntscr.com/image/7d30bc39d20d4960a49544f6e17434a5.png">


**code PHP đăng kí và form đăng kí**
- Tạo kết nối đến mysql để lấy dữ liệu
```
<?php
$server_username = "tên ";
$server_password = "********";
$server_host = "url";
$database = 'tên database';
 
$conn = mysqli_connect($server_host,$server_username,$server_password,$database) or die("không thể kết nối tới database");
mysqli_query($conn,"SET NAMES 'UTF8'");
```
form đăng kí tên register.php
```
<html>
	<head>
		<title>matisact - Form đăng ký thành viên</title>
	</head>
	<body>
		<?php
		require_once("url kết nối");
		if (isset($_POST["btn_submit"])) {
  			//lấy thông tin từ các form bằng phương thức POST
  			$username = $_POST["username"];
  			$password = $_POST["pass"];
 			 $name = $_POST["name"];
  			$email = $_POST["email"];
  			//Kiểm tra điều kiện bắt buộc đối với các field không được bỏ trống
			  if ($username == "" || $password == "" || $name == "" || $email == "") {
				   echo "bạn vui lòng nhập đầy đủ thông tin";
  			}else{
				    //thực hiện việc lưu trữ dữ liệu vào db
    				$sql = "INSERT INTO users(
    					username,
    					password,
    					name,
					    email
    					) VALUES (
    					'$username',
    					'$password',
					    '$name',
    					'$email'
    					)";
				    // thực thi câu $sql với biến conn lấy từ file connection.php
   				mysqli_query($conn,$sql);
				   echo "chúc mừng bạn đã đăng ký thành công";
			  }
	}
	?>
	<form action="register.php" method="post">
		<table>
			<tr>
				<td colspan="2">Form dang ky</td>
			</tr>	
			<tr>
				<td>Username :</td>
				<td><input type="text" id="username" name="username"></td>
			</tr>
			<tr>
				<td>Password :</td>
				<td><input type="password" id="pass" name="pass"></td>
			</tr>
			<tr>
				<td>Ho Ten :</td>
				<td><input type="text" id="name" name="name"></td>
			</tr>
			<tr>
				<td>Email :</td>
				<td><input type="text" id="email" name="email"></td>
			</tr>
			<tr>
				<td colspan="2" align="center"><input type="submit" name="btn_submit" value="Dang ky"></td>
			</tr>
 
		</table>
 
	</form>
	</body>
	</html>
```


form đăng nhập tên login.php

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form name="form1" method="post" action="checklogin.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><strong>Member Login </strong></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="text" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</td>
</form>
</tr>
</table>
```

- Xử lý thông tin đăng nhập:checklogin.php

```
<?php
session_start();
?>
<html>
<head>
	<title>Trang đăng nhập</title>
	<meta charset="utf-8">
</head>
<body>
<?php
	//Gọi file connection.php
	require_once("https:yyy/connection.php");
	// Kiểm tra nếu người dùng đã ân nút đăng nhập thì mới xử lý
	if (isset($_POST["btn_submit"])) {
		// lấy thông tin người dùng
		$username = $_POST["username"];
		$password = $_POST["password"];
		//làm sạch thông tin, xóa bỏ các tag html, ký tự đặc biệt 
		//mà người dùng cố tình thêm vào để tấn công theo phương thức sql injection
		$username = strip_tags($username);
		$username = addslashes($username);
		$password = strip_tags($password);
		$password = addslashes($password);
		if ($username == "" || $password =="") {
			echo "username hoặc password bạn không được để trống!";
		}else{
			$sql = "select * from users where username = '$username' and password = '$password' ";
			$query = mysqli_query($conn,$sql);
			$num_rows = mysqli_num_rows($query);
			if ($num_rows==0) {
				echo "tên đăng nhập hoặc mật khẩu không đúng !";
			}else{
				//tiến hành lưu tên đăng nhập vào session để tiện xử lý sau này
				$_SESSION['username'] = $username;
                // Thực thi hành động sau khi lưu thông tin vào session
                //  tiến hành chuyển hướng trang web tới một trang gọi là index.php
                header('url index.php');
			}
		}
	}
?>
	<form method="POST" action="login.php">
	<fieldset>
	    <legend>Đăng nhập</legend>
	    	<table>
	    		<tr>
	    			<td>Username</td>
	    			<td><input type="text" name="username" size="30"></td>
	    		</tr>
	    		<tr>
	    			<td>Password</td>
	    			<td><input type="password" name="password" size="30"></td>
	    		</tr>
	    		<tr>
	    			<td colspan="2" align="center"> <input name="btn_submit" type="submit" value="Đăng nhập"></td>
	    		</tr>
	    	</table>
  </fieldset>
  </form>
</body>
</html>
```
