<!DOCTYPE html>
<html>
<head>
  <title>Kết nối với chúng tôi</title>
</head>
<?php


$nameErr = $emailErr = $genderErr =$passErr =$phoneErr="";
$name = $email = $gender =$pass =$phone="";

if ($_SERVER["REQUEST_METHOD"] == "POST") {
  if (empty($_POST["username"])) {
    $nameErr = "*";
  } else {
    $name = test_input($_POST["username"]);
  }
  
  if (empty($_POST["email"])) {
    $emailErr = "*";
  } else {
    $email = test_input($_POST["email"]);
  }
    
  if (empty($_POST["phone"])) {
    $phoneErr = "";
  } else {
    $phone = test_input($_POST["phone"]);
  }

 if(empty($_POST["password"])){
  $passErr="*";
 } else{
  $pass=test_input($_POST["password"]);
 }

  if (empty($_POST["gender"])) {
    $genderErr = "*";
  } else {
    $gender = test_input($_POST["gender"]);
  }
}
function test_input($data) {
  $data = trim($data);
  $data = stripslashes($data);
  $data = htmlspecialchars($data);
  return $data;
}


?>


<style >
  .text {color: #ffffff;font-size:20px;}
  .error{color: #ff0000;}
</style>
<body style="background-image: url(http://dawnsescapadestravel.com/wp-content/uploads/2013/09/photodune-2230751-grunge-world-map-background-with-rose-compass-m.jpg)">  <br><br><br>
<center style="font-size: 30pt;">
<script >
var text="We Are One ! ! !"
var speed=40
if (document.all||document.getElementById){
document.write('<span id="highlight">' + text + '</span>')
var storetext=document.getElementById? document.getElementById("highlight") : document.all.highlight
}
else
document.write(text)
var hex=new Array("00","14","28","3C","50","64","78","8C","A0","B4","C8","DC","F0")
var r=1
var g=1
var b=1
var seq=1
function changetext(){
rainbow="#"+hex[r]+hex[g]+hex[b]
storetext.style.color=rainbow
}
function change(){
if (seq==6){
b--
if (b==0)
seq=1
}
if (seq==5){
r++
if (r==12)
seq=6
}
if (seq==4){
g--
if (g==0)
seq=5
}
if (seq==3){
b++
if (b==12)
seq=4
}
if (seq==2){
r--
if (r==0)
seq=3
}
if (seq==1){
g++
if (g==12)
seq=2
}
changetext()
}
function starteffect(){
if (document.all||document.getElementById)
flash=setInterval("change()",speed)
}
starteffect()

</script></center>

<form style="text-align: center;" method="POST" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>">
<br><br>
<p class="text"> Username: <input type="text" name="username" value="<?php echo $name;?>"><span class="error"> <?php echo $nameErr;?></span> </p>
<p class="text"> Password: <input type="password" name="password" value="<?php echo $pass;?>"><span class="error"> <?php echo $passErr;?></span>  </p>
<p class="text" > Email:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="email" value="<?php echo $email;?>">
<span class="error"> <?php echo $emailErr;?></span>  </p>
<p class="text"> phone:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="phone" value="<?php echo $phone;?>"><span class="error"> <?php echo $phoneErr;?></span>  </p>
<p class="text"><input type="radio" name="gender" value="female" >Female
  <input type="radio" name="gender" value="male">Male
 <span class="error"> <?php echo $genderErr; ?></span></p>
<br><input type="submit" name="ok" value="đăng kí" >
</form>
<?php 


if (($nameErr or $emailErr or $passErr or $genderErr)=="*"){
$trave="bạn phải điền các phần được đánh giấu";
}
?>
<script>
  
var m=<?php echo json_encode($trave);?>;
if (m) {
  alert(m);
}



</script>


<!--<audio>
   <iframe src="http://www.nhaccuatui.com/mh/auto/C0zv7Flkks"></iframe>
  </audio>
  --> 
</body>
<?php
if(isset($_POST['ok'])){

$servername = "localhost";
$username = "root";
$password = "";
$dbname = "user";

// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);
// Check connection
if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
}
if (!($nameErr or $emailErr or $passErr or $genderErr)=="*"){
 $sql = "INSERT INTO WeAreOne (username,password,email,phone,gender)
VALUES ('$name', '$pass', '$email','$phone','$gender')";

if ($conn->query($sql) === TRUE) {
    echo "New record created successfully";
} else {
    echo "Error: " . $sql . "<br>" . $conn->error;
}
 

}}


?>
</html>
