##[Task 25] SQL injection #Web_for_pentester - level 2
###:các công việc cần làm:
- [**Khai thác sqli level2**](#1)
- [**Code mô phỏng lỗi**](#2)
- [**Code sửa lỗi sqli cho level2+level1**](#3)

<a name="1"></a>

####Khai thác sqli level2

đầu tiên ta thêm đấu `'` vào cuối url , thấy trang mất dữ liệu => dính injection
<img src="http://image.prntscr.com/image/412abd3a7bd64cd296ee6da41130a909.png">
                           
- kiểm tra số cột bằng lệnh , `order by -- -` hiện lỗi `error no space` nghĩa là thằng dev đã loại bỏ khoảng trắng do người dùng nhập vào
<img src="http://image.prntscr.com/image/44b6fdb9f7484145a1780fb0a72a74ae.png">

- thử đổi khoảng trắng bằng %09, ok chạy ngon, giờ tiếp tục khai thác như lv1 để qua màn :))

<img src="http://image.prntscr.com/image/56871a4f3b4c4c70922f9510bdc5e679.png">

- dùng lệnh **union select** để khai thác cột lỗi, 1,2,3 số đẹp vãi chày =))

<img src="http://image.prntscr.com/image/87adb001ae4c4765a8ab7daba921a040.png">

- giờ tìm các dữ liệu quan trọng , đầu tiên database(), cái này dùng tool phát  1 :v

<img src="http://image.prntscr.com/image/0dfe92e935a6437e83a7c6b2fef42b68.png">

- tiếp theo tìm thằng table:
<img src="http://image.prntscr.com/image/8c7afd920a584ddc8475100d9ebe7ea9.png">
- giờ hốt nốt các cột , rồi tiến hành hốt xác thằng lv2 luôn:
<img src="http://image.prntscr.com/image/189ba95babd7484698f513fe2b2d3474.png">

- lấy thông tin từ table :union all select sẽ lấy tất cả các hàng
<img src="http://image.prntscr.com/image/0388c0402f414b05b0f24b1161e8d7d4.png">

<a name="2"></a>
####Code mô phỏng lỗi

```

<?php
    ... ...
  if (preg_match('/ /', $_GET["name"])) {
      die("ERROR NO SPACE");   
  }
  $sql = "SELECT * FROM users where name='";
  $sql .= $_GET["name"]."'";

  $result = mysql_query($sql);
  ... ...
?>

```




